"use strict";var leaderboards=document.getElementById("leaderboards"),table=document.getElementById("table"),players=JSON.parse(localStorage.getItem("players")),currentPlayer="",currentScore="",position=0;leaderboards.addEventListener("click",(function(e){null!=e.target.id&&(document.getElementById("arrow").classList.toggle("icon--rotate"),table.classList.toggle("table--show"))}));var loadLearederboards=function(){var e=document.createDocumentFragment();for(var t in players){var l=document.createElement("div"),n=document.createElement("div");l.textContent=players[t].name,n.textContent=players[t].level,l.classList.add("player"),n.classList.add("score"),e.appendChild(l),e.appendChild(n)}table.appendChild(e)},setLeaderboards=function(){for(var e in 1==level&&1!=players.length&&0==position&&(position=players.length-1),players)if(level>=players[e].level&&e!=players.length-1)return players.splice(position,1),position=e,players.splice(e,0,{name:name,level:level}),0;position=players.length-1,players[players.length-1]={name:name,level:level}},createPlayer=function(){null==players&&(players=[]),players.push({name:name,level:level}),localStorage.setItem("players",JSON.stringify(players))},main=document.getElementById("main"),start=document.getElementById("start"),levelHTML=document.getElementById("level"),nameHTML=document.getElementById("name"),titles=document.getElementById("titles"),startConfirm=document.getElementById("startConfirm"),input=document.getElementById("input"),select=document.getElementById("select"),modalEnd=document.getElementById("modalEnd"),nameEnd=document.getElementById("nameEnd"),scoreEnd=document.getElementById("scoreEnd"),restart=document.getElementById("restart"),pattern=[],userSlected=[],on=!1,index=0,level=0,enabled=!1,time=500,gameOver=!1,name="",speed="";loadLearederboards(),main.addEventListener("click",(function(e){if("start"==e.target.id&&(e.target.disabled=!0,document.getElementById("lightbox").classList.add("lightbox--show")),enabled){switch(e.target.id){case"green":userSlected.push("green");break;case"red":userSlected.push("red");break;case"yellow":userSlected.push("yellow");break;case"blue":userSlected.push("blue")}validate()}})),startConfirm.addEventListener("click",(function(e){if(e.preventDefault(),name=input.value,nameHTML.textContent=name,speed=select[select.selectedIndex].value,form.checkValidity()){switch(titles.style.display="flex",gameOver=!1,input.value="",select.selectedIndex=0,document.getElementById("lightbox").classList.remove("lightbox--show"),createPlayer(),speed){case"slow":time=1e3;break;case"medium":time=600;break;case"fast":time=200}setTimeout("setColor()",500)}else""==name&&alert("Insert a name")}));var setColor=function(){switch(level+=1,setLeaderboards(),localStorage.setItem("players",JSON.stringify(players)),table.innerHTML='<div class="table__header">Name</div><div class="table__header">Lvl</div>',loadLearederboards(),start.textContent="...",levelHTML.firstElementChild.textContent=level,Math.floor(4*Math.random())+1){case 1:pattern.push("green");break;case 2:pattern.push("red");break;case 3:pattern.push("yellow");break;case 4:pattern.push("blue")}var e=setInterval((function(){index>=pattern.length?(index=0,on=!1,start.textContent="Select",document.getElementById("green").classList.add("green__enabled"),document.getElementById("red").classList.add("red__enabled"),document.getElementById("yellow").classList.add("yellow__enabled"),document.getElementById("blue").classList.add("blue__enabled"),enabled=!0,clearInterval(e)):on?(document.getElementById(pattern[index]).classList.remove("".concat(pattern[index],"__light")),on=!1,index+=1):(document.getElementById(pattern[index]).classList.add("".concat(pattern[index],"__light")),on=!0)}),time)},validate=function(){var e=userSlected.length-1;userSlected[e]==pattern[e]?e+=1:(start.disabled=!1,e=0,start.textContent="Error",gameOver=!0,nameEnd.textContent=name,scoreEnd.textContent=level,modalEnd.classList.add("lightbox--show")),e!=pattern.length||gameOver||(start.textContent="Correct",userSlected=[],document.getElementById("green").classList.remove("green__enabled"),document.getElementById("red").classList.remove("red__enabled"),document.getElementById("yellow").classList.remove("yellow__enabled"),document.getElementById("blue").classList.remove("blue__enabled"),enabled=!1,setTimeout("setColor()",time))},reset=function(){pattern=[],userSlected=[],name="",enabled=!1,level=0,start.textContent="Start",levelHTML.firstElementChild.textContent=level,titles.style.display="none",currentPlayer="",currentScore="",position=0,players=JSON.parse(localStorage.getItem("players")),document.getElementById("green").classList.remove("green__enabled"),document.getElementById("red").classList.remove("red__enabled"),document.getElementById("yellow").classList.remove("yellow__enabled"),document.getElementById("blue").classList.remove("blue__enabled"),table.innerHTML='<div class="table__header">Name</div><div class="table__header">Lvl</div>',loadLearederboards()};restart.addEventListener("click",(function(){reset(),modalEnd.classList.remove("lightbox--show")}));